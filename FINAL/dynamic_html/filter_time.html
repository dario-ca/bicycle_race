<p id="calendar"></p>

<div class="buttonwrapper">
	<input type="submit" value="Apply Filter" class="filterbutton color_button" id="fuu" onclick="selectFilter(document,0); filters.apply(windowNumber); sendToMap()"/>
</div>

<script>

	var startdate = new Date('2013-06-27');
	var enddate = new Date('2013-12-31');

	$('#calendar').DatePicker({			
		flat: true,
		date: [startdate, enddate],
		current: startdate,
		calendars: 1,
		starts: 1,
		view: 'days', // 'months',
		onRender: function(date) {
				return {
					disabled: (date.valueOf() < startdate.valueOf() || date.valueOf() > enddate.valueOf())
				}
			},
        onChange: function(date){
            selectFilter(document,0);
            filters.apply(windowNumber);
            sendToMap();
        }
	});


	// function that simply sends the date to the map object
	// this can be done else where as long as the date gets passed to the bikeobject it will still work
	function sendToMap(){
		// get displayed date and send it to Bikemap
		var selecteddate = $('#calendar').DatePickerGetDate(true);
        filters.setDate(selecteddate);
		BikeMap.colorStations(2, selecteddate); // TODO: this throws an error, cannot figure out why
        BikeMap.setWeatherIcon(weatherIcon, selecteddate);
	};

</script>


